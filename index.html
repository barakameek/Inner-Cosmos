<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persona Labyrinth</title>
    <!-- Link to the CSS file -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Add Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <!-- Main container for the game -->
    <div id="gameContainer">

        <!-- ========================== -->
        <!-- ===== Game Screens ===== -->
        <!-- ========================== -->

        <div id="mainMenuScreen" class="screen active"> <!-- Start with main menu active -->
            <h1>Persona Labyrinth</h1>
            <button id="startGameButton">Begin Introspection</button>
            <button id="loadGameButton">Continue Journey</button> <!-- Placeholder -->
            <button id="metaProgressionButton">View Unlocks</button> <!-- Placeholder -->
            <button id="settingsButton">Settings</button> <!-- Placeholder -->
        </div>

        <div id="mapScreen" class="screen" style="display: none;">
            <h2>The Labyrinth of Self</h2>
            <div id="mapArea">
                <!-- SVG Map will be rendered here by UIManager -->
            </div>
            <div id="playerInfoMap">
                <!-- Player HP, Deck size, Insight etc. -->
                 Loading Map Info...
            </div>
        </div>

        <div id="combatScreen" class="screen" style="display: none;">
            <div id="enemyArea">
                <!-- Enemy displays will be rendered here -->
            </div>
            <div id="playerArea">
                 <!-- Player Info: HP, Focus, Block, Statuses -->
                 <div id="playerStatsCombat">
                     <span id="playerHP">HP: ...</span> |
                     <span id="playerFocus">Focus: ...</span> |
                     <span id="playerBlock">Block: ...</span>
                 </div>
                 <div id="playerStatusesCombat">Statuses: ...</div>
            </div>
            <div id="handArea">
                <!-- Player's card hand -->
            </div>
            <div id="deckDiscardArea">
                 <div id="deckInfo">
                     <span id="deckCountElement">Deck: ...</span> |
                     <span id="discardCountElement">Discard: ...</span>
                     <!-- Add Exhaust Count? -->
                 </div>
                <button id="endTurnButton">End Turn</button>
            </div>
        </div>

        <div id="eventScreen" class="screen" style="display: none;">
             <h2>Encounter</h2>
            <div id="eventText">Loading event...</div>
            <div id="eventChoices">
                <!-- Choices/Buttons will be rendered here -->
            </div>
        </div>

        <div id="shopScreen" class="screen" style="display: none;">
            <h2>Integration Hub</h2>
            <div id="shopInsightDisplay">Insight: ... <i class='fas fa-brain insight-icon'></i></div>
            <div id="shopCards" class="shop-section card-grid">
                <h3>Concepts for Sale:</h3>
                 <!-- Card items rendered here -->
            </div>
            <div id="shopArtifacts" class="shop-section artifact-grid">
                 <h3>Relics for Sale:</h3>
                 <!-- Artifact items rendered here -->
            </div>
            <div id="shopRemoveService" class="shop-section">
                 <h3>Refinement Service:</h3>
                 <!-- Removal button rendered here -->
            </div>
            <button id="leaveShopButton">Leave Hub</button>
        </div>

        <div id="restSiteScreen" class="screen" style="display: none;">
            <h2>Sanctuary</h2>
            <div id="restUsedIndicator">Choose one action:</div>
            <button id="restHealButton">Restore Integrity (Heal 30%)</button>
            <button id="restMeditateButton">Meditate (Upgrade Card)</button>
            <button id="restJournalButton">Journal (Remove Card)</button>
            <button id="leaveRestSiteButton">Leave</button>
        </div>

        <div id="rewardScreen" class="screen" style="display: none;">
            <h2>Spoils of Introspection</h2>
            <div id="rewardInsight">Insight Gained: ...</div>
            <div id="rewardCards" class="card-grid">
                <h3>Choose a Concept:</h3>
                <!-- Card choices will be rendered here -->
            </div>
            <div id="rewardArtifacts" class="artifact-grid">
                <h3>Choose a Relic:</h3>
                <!-- Artifact choices will be rendered here -->
            </div>
            <button id="rewardSkipButton">Continue</button>
        </div>

         <div id="metaScreen" class="screen" style="display: none;">
             <h2>Meta Progression / Unlocks</h2>
             <p>View unlocked concepts, artifacts, permanent upgrades here...</p>
             <!-- Content for viewing unlocks, spending Insight -->
             <button id="backToMenuButton">Back to Menu</button>
         </div>


        <!-- ========================== -->
        <!-- ===== UI Overlays ====== -->
        <!-- ========================== -->

        <!-- Tooltip (Initially Hidden) -->
        <div id="tooltip" style="display: none;"></div>

        <!-- General Modal Popup (Initially Hidden) -->
        <div id="modalPopup" class="modal" style="display: none;">
             <div class="modal-content">
                 <span class="close-button">Ã—</span>
                 <p id="modalText"></p>
                 <div id="modalChoices"></div>
             </div>
         </div>

         <!-- Card Selection Modal (Initially Hidden) -->
         <div id="cardSelectionModal" class="modal card-select-modal" style="display: none;">
              <div class="modal-content">
                  <h3 id="cardSelectionTitle">Select a Card</h3>
                  <div id="cardSelectionGrid" class="card-grid">
                      <!-- Cards to select will be rendered here -->
                  </div>
                  <button id="cardSelectionCancel">Cancel</button>
              </div>
          </div>

    </div> <!-- End #gameContainer -->

    <!-- Link to the main JavaScript file (using type="module" for import/export) -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
