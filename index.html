<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persona Labyrinth</title>
    <!-- Link to the CSS file -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Add Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <!-- Main container for the game -->
    <div id="gameContainer">

        <!-- ========================== -->
        <!-- ===== Game Screens ===== -->
        <!-- ========================== -->

        <!-- Main Menu (Starts Active) -->
        <div id="mainMenuScreen" class="screen active">
            <h1>Persona Labyrinth</h1>
            <button id="startGameButton">Begin Introspection</button>
            <button id="loadGameButton">Continue Journey</button> <!-- Functionality Not Implemented -->
            <button id="metaProgressionButton">View Unlocks</button>
            <button id="settingsButton">Settings</button> <!-- Functionality Not Implemented -->
        </div>

        <!-- Map Screen -->
        <div id="mapScreen" class="screen"> <!-- Initially hidden via CSS -->
            <h2>The Labyrinth of Self</h2>
            <div id="mapArea">
                <!-- SVG Map will be rendered here by UIManager -->
                <p style="text-align: center; padding: 20px;">Loading Map...</p>
            </div>
            <div id="playerInfoMap">
                 <!-- Player Info: Floor, HP, Insight, Deck -->
                 Loading Map Info...
            </div>
        </div>

        <!-- Combat Screen -->
        <div id="combatScreen" class="screen"> <!-- Initially hidden via CSS -->
            <div id="enemyArea">
                <!-- Enemy displays will be rendered here -->
                 <p>Waiting for combat...</p>
            </div>
            <div id="playerArea">
                 <div id="playerStatsCombat">
                     <span id="playerHP">HP: ...</span> |
                     <span id="playerFocus">Focus: ...</span> |
                     <span id="playerBlock">Block: ...</span>
                 </div>
                 <div id="playerStatusesCombat">Statuses: ...</div>
            </div>
            <div id="handArea">
                <!-- Player's card hand -->
            </div>
            <div id="deckDiscardArea">
                 <div id="deckInfo">
                     <span id="deckCountElement">Deck: ...</span> |
                     <span id="discardCountElement">Discard: ...</span>
                     <!-- Consider adding Exhaust Count -->
                     <!-- <span id="exhaustCountElement">Exhaust: ...</span> -->
                 </div>
                <button id="endTurnButton">End Turn</button>
            </div>
        </div>

        <!-- Event Screen -->
        <div id="eventScreen" class="screen"> <!-- Initially hidden via CSS -->
             <h2>Encounter</h2>
            <div id="eventText"><p>Loading event...</p></div>
            <div id="eventChoices">
                <!-- Choices/Buttons will be rendered here by UIManager -->
            </div>
        </div>

        <!-- Shop Screen -->
        <div id="shopScreen" class="screen"> <!-- Initially hidden via CSS -->
            <h2>Integration Hub</h2>
            <div id="shopInsightDisplay">Insight: ... <i class='fas fa-brain insight-icon'></i></div>
            <div id="shopCards" class="shop-section card-grid">
                <h3>Concepts for Sale:</h3>
                 <!-- Card items rendered here -->
                 <p>Loading concepts...</p>
            </div>
            <div id="shopArtifacts" class="shop-section artifact-grid">
                 <h3>Relics for Sale:</h3>
                 <!-- Artifact items rendered here -->
                  <p>Loading relics...</p>
            </div>
            <div id="shopRemoveService" class="shop-section">
                 <h3>Refinement Service:</h3>
                 <!-- Removal button rendered here -->
            </div>
            <button id="leaveShopButton">Leave Hub</button>
        </div>

        <!-- Rest Site Screen -->
        <div id="restSiteScreen" class="screen"> <!-- Initially hidden via CSS -->
            <h2>Sanctuary</h2>
            <div id="restUsedIndicator">Choose one action:</div>
            <button id="restHealButton">Restore Integrity (Heal 30%)</button>
            <button id="restMeditateButton">Meditate (Upgrade Card)</button>
            <button id="restJournalButton">Journal (Remove Card)</button>
            <button id="leaveRestSiteButton">Leave</button>
        </div>

        <!-- Reward Screen -->
        <div id="rewardScreen" class="screen"> <!-- Initially hidden via CSS -->
            <h2>Spoils of Introspection</h2>
            <div id="rewardInsight">Insight Gained: ...</div>
            <div id="rewardCards" class="card-grid">
                <h3>Choose a Concept:</h3>
                <p>Processing...</p>
                <!-- Card choices will be rendered here -->
            </div>
            <div id="rewardArtifacts" class="artifact-grid">
                <h3>Choose a Relic:</h3>
                 <p>Processing...</p>
                <!-- Artifact choices will be rendered here -->
            </div>
            <button id="rewardSkipButton">Continue</button>
        </div>

        <!-- Meta Progression Screen -->
         <div id="metaScreen" class="screen"> <!-- Initially hidden via CSS -->
             <h2>Meta Progression / Unlocks</h2>
             <p>View unlocked concepts, artifacts, permanent upgrades here...</p>
             <div id="metaContent">
                 <!-- Unlocks and upgrade info rendered here -->
                 <p>Loading meta progress...</p>
             </div>
             <button id="backToMenuButton">Back to Menu</button>
         </div>


        <!-- ========================== -->
        <!-- ===== UI Overlays ====== -->
        <!-- ========================== -->

        <!-- Tooltip (Initially Hidden, Positioned by JS) -->
        <div id="tooltip" style="display: none; position: absolute; border: 1px solid black; background-color: lightyellow; padding: 5px; z-index: 200;"></div>

        <!-- General Modal Popup (Initially Hidden) -->
        <div id="modalPopup" class="modal" style="display: none;">
             <div class="modal-content">
                 <span class="close-button">Ã—</span>
                 <p id="modalText"></p>
                 <div id="modalChoices"></div>
             </div>
         </div>

         <!-- Card Selection Modal (Initially Hidden) -->
         <div id="cardSelectionModal" class="modal card-select-modal" style="display: none;">
              <div class="modal-content">
                  <h3 id="cardSelectionTitle">Select a Card</h3>
                  <div id="cardSelectionGrid" class="card-grid">
                      <!-- Cards to select will be rendered here -->
                       <p>Loading cards...</p>
                  </div>
                  <button id="cardSelectionCancel">Cancel</button>
              </div>
          </div>

         <!-- Notification Area (Positioned by CSS) -->
        <div id="notificationArea">
            <!-- Notifications appear here -->
        </div>
        <!-- Action Feedback Area (Positioned by CSS) -->
        <div id="actionFeedbackArea">
            <!-- Action feedback appears here -->
        </div>


    </div> <!-- End #gameContainer -->

    <!-- Link to the main JavaScript file (using type="module" for import/export) -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
